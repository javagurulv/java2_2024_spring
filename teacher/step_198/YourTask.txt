На этом этапе мы установим ограничения доступа к нашему
REST и затем исправим тесты. Нам необходимо
указать в настройках SecurityFilterChain, что наш REST
доступен только аутентифицированным пользователям, но другие
запросы по-прежнему разрешены без аутентификации.

Также нам нужно снова включить Basic security (как вы
помните, мы отключили ее несколько шагов назад).

Ваша первая задача: реализовать это требование (и наблюдать, как
ваши тесты провалятся).

Когда это будет сделано, мы перейдем к исправлению тестов.
Поскольку наши существующие тесты не предназначены для
проверки аутентификации, будет достаточно их пофиксить,
используя моковых пользователей. Для использования моковых
пользователей нам нужно добавить новую зависимость для
реализации тестов - spring-security-test.

Ваша вторая задача: найдите версию spring-security-test,
соответствующую версии spring-boot-starter-security, которую
мы используем, добавьте ее в файл build.gradle и исправьте все
падающие тесты, добавив мокового пользователя.